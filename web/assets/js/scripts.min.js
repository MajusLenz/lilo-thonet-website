$(function(){var l=1;var t=function(a,e){var t=a.indexOf(e);if(t!==-1)a.splice(t,1)};var n=function(a,e){if(a===0){$("html, body").animate({scrollTop:0},e)}else{var t=$(".top").outerHeight();var n=$(a).offset().top;$("html, body").animate({scrollTop:n-t-40},e)}};function a(e,t){var n;return function(){var a=arguments;clearTimeout(n);n=setTimeout(function(){e.apply(this,a)}.bind(this),t)}}var h=$(".grid").masonry({itemSelector:".grid-item",columnWidth:".grid-sizer",percentPosition:true});$lazyInstance=$(".lazy").Lazy({chainable:false,scrollDirection:"vertical",effect:"fadeIn",effectTime:350,threshold:500,onError:function(a){console.log("error loading: "+a.data("src"))},afterLoad:function(a){h.masonry("layout")},onFinishedAll:function(){}});$(".rightclick-alert").on("contextmenu",function(a){alert("Diese Grafik ist kopiergeschützt! Wenn Sie etwas herunterladen möchten, kontaktieren Sie bitte den Administrator.");a.stopPropagation();a.preventDefault();return false});var e=$(".burger-button-open");var i=$(".burger-button-close");var r=$("#burger-overlay");var o=function(){var a=$(".header-balken1, .header-balken1 + hr").outerHeight()+.8;r.css("top",a+"px")};o();e.on("click",function(){e.fadeOut(0);i.fadeIn(0);o();r.fadeIn(320)});i.on("click",function(){i.fadeOut(0);e.fadeIn(0);r.fadeOut(400)});$(".close-burger-trigger").on("click",function(){i.trigger("click")});var s=$(".suchfilter-btn");var f=$("#suche-overlay");var d=$(".inhalt");var v=$(".grid-item");var u=function(){var a=$(".top").outerHeight();f.css("top",a+"px")};u();s.on("click",function(){var a=true;if(f.hasClass("open"))a=false;if(a){u();f.fadeIn(350);d.animate({opacity:0},350,"linear",function(){v.addClass("mini");h.masonry("layout")});f.addClass("open");setTimeout(function(){n(0,0)},300)}else{v.removeClass("mini");h.masonry("layout");setTimeout(function(){v.removeClass("mini");h.masonry("layout")},300);f.fadeOut(350);d.animate({opacity:100},350);f.removeClass("open")}});$(document).on("click",".mini, .mini a",function(a){a.preventDefault();a.stopPropagation();return false});$(".detail-zoom").each(function(){var a=$(this);var e=a.data("zoom-image");a.zoom({url:e,magnify:.5})});var p="grid-size";var g={expires:18250};$(".resize-buttons button").on("click",function(){var a=$(this);var e="active-btn";var t="inactive-btn";if(a.hasClass(e))return;$(".resize-buttons .active-btn").removeClass(e).addClass(t);a.removeClass(t).addClass(e);var n="grid";var i="grid-gross";var r="grid-mittel";var o="grid-klein";var s="grid-sizer";var l="grid-item";var f="grid-item-gross";var d="grid-item-mittel";var v="grid-item-klein";var u=a.data("size");var c=$("."+n);var m=$("."+l+", ."+s);c.removeClass(o).removeClass(r).removeClass(i);m.removeClass(v).removeClass(d).removeClass(f);switch(u){case"gross":c.addClass(i);m.addClass(f);Cookies.set(p,"gross",g);break;case"mittel":c.addClass(r);m.addClass(d);Cookies.set(p,"mittel",g);break;case"klein":c.addClass(o);m.addClass(v);Cookies.set(p,"klein",g);break}h.masonry("layout");setTimeout(function(){$lazyInstance.update()},200)});var c=Cookies.get(p);if(c){$(".resize-buttons button.resize-btn-"+c).trigger("click")}else $(".resize-btn-mittel").addClass("active-btn").removeClass("inactive-btn");var m="favoriten";var b="";var C=null;var k=function(){b=Cookies.get(m);if(b!==undefined&&b!==""){C=b.split("-")}else{C=[]}};k();var w=$(".alle-fav-button");var y=w.find(".alle-fav-button-img-voll");var x=w.find(".alle-fav-button-img-leer");var z=w.find(".alle-fav-button-counter");var I=function(){if(C.length>0){z.fadeIn(0);if(C.length<10){z.find("span").text(C.length);z.removeClass("two-digits","three-digits")}else if(C.length<100){z.find("span").text(C.length);z.removeClass("three-digits");z.addClass("two-digits")}else{z.find("span").text("99+");z.removeClass("two-digits");z.addClass("three-digits")}}else{z.fadeOut(0)}};I();if($(".favorites-overview").length){w.addClass("opened")}else{w.addClass("closed")}var O=$(".add-fav-button");var T=function(){O.each(function(){var a=$(this);var e=a.find(".add-fav-button-img-voll");var t=a.find(".add-fav-button-img-leer");var n=a.data("id");if(C.indexOf(""+n)>-1){e.fadeIn(0);t.fadeOut(0)}else{e.fadeOut(0);t.fadeIn(0)}})};T();O.on("click",function(){var a=$(this);var e=a.data("id");k();if(C.indexOf(""+e)>-1){t(C,""+e)}else{C.push(""+e)}T();I();Cookies.set(m,C.join("-"),g)});var j=$(".favorites-delete-all");var S=j.find(".favorites-delete-all-button");var D=j.find(".favorites-delete-all-confirm");var P=j.find(".favorites-delete-all-back");var A=j.find(".favorites-delete-all-question");S.on("click",function(){S.fadeOut(0);D.fadeIn(0);P.fadeIn(0);A.fadeIn(0)});P.on("click",function(){S.fadeIn(0);D.fadeOut(0);P.fadeOut(0);A.fadeOut(0)});D.on("click",function(){Cookies.set(m,"",g);window.location.href=$(this).data("redirect")});$(".js-range-slider").ionRangeSlider({skin:"square"});var H=$(".js-range-slider").data("ionRangeSlider");$(window).on("resize",function(){o();u();setTimeout(function(){$lazyInstance.update()},200)});$(".scroll-button").on("click",function(){var a=$(this);var e=a.attr("href");var t;if(e==="#")t=0;else t=$(e);n(t,"slow")});var L=window.location.href;var W=L.split("#")[1];if(W){var q=$("#"+W);if(q.length){n(0,0);n(q,"slow")}}var E="active";var N="inactive";var R=f.find(".input-frame");var F=R.filter(".info-frame");var G=R.filter(".jahr-frame");var M=G.find(".real-input");var U=G.find(".jahr-auswahl");var V=M.data("min");var X=M.data("max");var _=$("#blaupausen");var B=_.find(".auswahl-item").first();var J=_.find(".vorschlag-item").first();var K=R.find("input");var Q=K.filter(".add-input");R.find(".label").on("click",function(){var a=$(this).parent();var e=a.hasClass(E);R.removeClass(E).addClass(N);if(!e)a.addClass(E).removeClass(N)});var Y=function(a,e,t,n){var i=false;a.focus();e.find("li span").each(function(){if($(this).text()==n){i=true}});if(!i){t.children().remove();var r=B.clone();r.data("wert",n);r.find("span").text(n);r.find("button").on("click",function(){var a=$(this).parent();Z(a)});r.appendTo(e);a.val(null);na(a)}};var Z=function(a){var e=$(a);var t=e.parent().parent().parent();e.remove();var n=t.find(".add-input");na(n)};var aa=function(){var a=$(this);var e=a.parent();var t=e.data("wert");console.log(t);var n=e.parent();var i=n.parent().parent();var r=i.find(".add-input");var o=i.find(".auswahl ul");Y(r,o,n,t)};$("#suche-form").on("submit",function(){F.each(function(){var a=$(this);var e="";a.find(".auswahl .auswahl-item").each(function(){var a=$(this).data("wert");if(a){e+=";"+a}});a.find(".real-input").val(e)})});var ea=$("#ajax-route").data("route");var ta=function(a,e,t){if(t>=l){var n=e.find(".vorschlaege ul");n.children().remove();for(var i=0;i<a.length;i++){var r=a[i].wert;var o=J.clone();o.data("wert",r);var s=o.find("span");s.text(r);s.on("click",aa);o.appendTo(n)}}};var na=function(a,e){var t=++l;if(e){t=Number.MAX_VALUE}var n=a.val();var i=a.parent();var r=i.find(".real-input").prop("name");var o="";i.find(".auswahl-item").each(function(){o+=";"+($(this).text()+"").trim()});$.ajax({url:ea,type:"POST",dataType:"json",data:{infoName:r,infoWert:n,infoPicked:o},async:true,success:function(a){ta(a.vorschlaege,i,t)}})};var ia=a(function(a){na(a)},700);Q.on("input paste",function(){var a=$(this);ia(a)});Q.on("keypress",function(a){if(a.which==13){a.preventDefault();var e=$(this);var t=e.val();if(t){var n=e.parent();var i=n.find(".auswahl ul");var r=n.find(".vorschlaege ul");Y(e,i,r,t)}}});F.find(".vorschlag-item span").on("click",aa);F.find(".auswahl-item button").on("click",function(){var a=$(this).parent();Z(a)});var ra=function(){if(M.data("from")==V&&M.data("to")==X){return true}return false};var oa=function(){U.fadeOut(0);setTimeout(function(){H.update({from:V,to:X});G.find("real-input").val(V+";"+X)},100)};if(!ra()){U.fadeIn(0)}U.find(".jahr-auswahl-button").on("click",function(){oa()});if(f.length)H.update({onChange:function(){if(ra()){U.fadeOut(0)}else{U.fadeIn(0);var a=U.find(".jahr-auswahl-text");var e=M.data("from");var t=M.data("to");if(e==t)a.text(e);else a.text(e+"–"+t)}}});$("#suche-form").on("reset",function(){oa();F.each(function(){var a=$(this);a.find(".auswahl .auswahl-item").remove();var e=a.find(".add-input");na(e,true)})})});